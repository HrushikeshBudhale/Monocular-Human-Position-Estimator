<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Monocular Human Position Estimator: Monocular-Human-Position-Estimator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Monocular Human Position Estimator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Monocular-Human-Position-Estimator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://app.travis-ci.com/HrushikeshBudhale/Monocular-Human-Position-Estimator"><object type="image/svg+xml" data="https://app.travis-ci.com/HrushikeshBudhale/Monocular-Human-Position-Estimator.svg?branch=main" style="pointer-events: none;">Build Status</object></a> <a href="https://coveralls.io/github/HrushikeshBudhale/Monocular-Human-Position-Estimator?branch=main"><object type="image/svg+xml" data="https://coveralls.io/repos/github/HrushikeshBudhale/Monocular-Human-Position-Estimator/badge.svg?branch=main" style="pointer-events: none;">Coverage Status</object></a> <a href="https://opensource.org/licenses/MIT"><object type="image/svg+xml" data="https://img.shields.io/badge/License-MIT-yellow.svg" style="pointer-events: none;">License: MIT</object></a></p>
<h2><a class="anchor" id="autotoc_md1"></a>
Project Overview and Description</h2>
<p>Applications of Computer Vision are being rapidly deployed across diverse fields from simple object detection to more advanced self-driving vehicles. It is a field of artificial intelligence that enables computers and systems to derive meaningful information from digital images, videos, and other visual inputs and take actions or make recommendations based on that information. Acme Robotics is looking to leverage the field of Computer Vision by integrating a perception software module into its existing robotic hardware system to detect and track humans around a robot.</p>
<p>The scope of this project is to develop a software which detects and tracks one or more humans around a robot using a monocular camera. This is accomplished by using the pre-trained HOG (Histogram of Oriented Gradient) descriptor provided by OpenCV. Along with this we also used an SVM (Support Vector Machine) detector from opencv to detect the location of humans in the camera frame. These features output the parameters of the bounding boxes around the detected humans. These parameters are then used to determine the 2d position (x,y) of the detected humans with respect to the camera. Using appropriate camera parameters and known values of the size of bounding boxes for an average human standing at a given distance from a camera, the value of depth (distance between the camera and human/s) is calculated by the method of equivalent ratio. These 3d-positions are then transformed to the robot’s frame to determine the position of humans with respect to the robot using an appropriate transformation matrix between the robot and camera frame. These 3d-positions are then fed into the tracker part of the software which assigns unique identity to the detected humans.</p>
<p>Detailed developer level documentation and installation steps have been created for new developers to contribute and use it with ease. This project ensures it’s correctness by testing every class on multiple unit tests created in the gtest suite. Latest build status and code coverage tests are performed in continuous integration with the help of travis and coverall. To ensure implementation accuracy each class has been developed by unit testing it on multiple test cases using the gtest suite.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Risks and Mitigation</h2>
<ol type="1">
<li>For detecting humans, HOG descriptor has been used which is not a state of the art detector and performs poorly in unevenly lit frames, it also fails to detect humans properly in poses other than standing pose like sitting, lying, bending positions. Detection performance can be improved by using new human detections techniques using neural networks.</li>
<li>Implemented tracker does not account for 2 humans crossing each other and can result in change the id assigned to humans on such events. Improved results can be obtained by properly estimating depth of each person from camera and using the knowledge from previous tracker output.</li>
<li>As the distance of human from camera is being calculated using monocular camera, the depth estimate of the tracker is too noisy, results can be improved by adding proper filter or by using depth sensor.</li>
</ol>
<hr  />
 <h2><a class="anchor" id="autotoc_md4"></a>
&lt;a href="https://docs.google.com/spreadsheets/d/1KF9aKQJTfanBHgDmTPipmk2IF8u1touHpT6VdUuIId4/edit?usp=sharing"&gt;Product Backlog&lt;/a&gt;</h2>
<h2><a class="anchor" id="autotoc_md5"></a>
&lt;a href="https://docs.google.com/document/d/1Ov0n0FiRoefbuTpbJCGnaQuJ2t1R9MHB2j_GyZQ0szY/edit?usp=sharing"&gt;Sprint planning notes&lt;/a&gt;</h2>
<h2><a class="anchor" id="autotoc_md6"></a>
Deliverables</h2>
<ul>
<li>Developer level documentation using doxygen</li>
<li>Build status using travis CI</li>
<li>Code coverage using coveralls</li>
<li>Accurate implementation using generated test cases in gtest</li>
<li>Steps showing how to build the repository</li>
<li>Steps showing how to run test and demo applications</li>
<li>Steps showing how to generate Doxygen documentation</li>
<li>Valgrind output for memory leak ceck</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Documentation</h2>
<p>Doxygen generated documentation can be found <a href="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/main/docs/html/index.html">here</a>. <br  />
 Run the following command in folder's root directory to generate new documentation </p><div class="fragment"><div class="line">doxygen docs/doxygen_config.conf</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
Standard install via command-line</h2>
<div class="fragment"><div class="line">sudo apt-get update</div>
<div class="line">sudo apt-get install libeigen3-dev</div>
<div class="line">sudo apt-get install libopencv-dev</div>
<div class="line">git clone --recursive https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator</div>
<div class="line">cd Monocular-Human-Position-Estimator/</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --><p><br  />
</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Building for code coverage</h2>
<div class="fragment"><div class="line">sudo apt-get install lcov</div>
<div class="line">cmake -D COVERAGE=ON -D CMAKE_BUILD_TYPE=Debug ../</div>
<div class="line">make</div>
<div class="line">make code_coverage</div>
</div><!-- fragment --><p>This generates a index.html page in the build/coverage sub-directory that can be viewed locally in a web browser.</p>
<p><br  />
</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Run main program</h2>
<p>To run realtime tracking using camera, run following command </p><div class="fragment"><div class="line">./app/shell-app</div>
</div><!-- fragment --><p>To run tracking on video, run following command by providing file path to the existing video file </p><div class="fragment"><div class="line">./app/shell-app &lt;file path&gt;</div>
</div><!-- fragment --><p><br  />
</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Run tests</h2>
<div class="fragment"><div class="line">./test/cpp-test</div>
</div><!-- fragment --><p><br  />
</p>
<h2><a class="anchor" id="autotoc_md12"></a>
cppcheck</h2>
<div class="fragment"><div class="line">find ./app ./include ./test -iname  *.cpp -or -iname *.hpp | xargs cppcheck</div>
</div><!-- fragment --><p>Existing results can be found in <a href="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/main/results/cppcheck_output.txt">/results/cppcheck_output.txt</a></p>
<p><br  />
</p>
<h2><a class="anchor" id="autotoc_md13"></a>
cpplint</h2>
<div class="fragment"><div class="line">find ./app ./include ./test -iname  *.cpp -or -iname *.hpp | xargs cpplint</div>
</div><!-- fragment --><p>Existing results can be found in <a href="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/main/results/cpplint_output.txt">/results/cpplint_output.txt</a></p>
<p><br  />
</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Valgrind memory leak check</h2>
<p>Checked for memory leaks uing valgrind. No memory leaks found. output can be found <a href="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/development/results/valgrind_output.txt">here</a></p>
<hr  />
<h2><a class="anchor" id="autotoc_md16"></a>
UML Class Diagram</h2>
<p><img src="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/development/uml/revised/uml_v2.png" alt="UML Diagram" width="600" class="inline"/> </p>
<hr  />
<h2><a class="anchor" id="autotoc_md18"></a>
Activity Diagram</h2>
<p><img src="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/development/docs/activity_diagram.png" alt="ACTIVITY DIAGRAM" width="400" class="inline"/> </p>
<hr  />
<h2><a class="anchor" id="autotoc_md20"></a>
Test Results</h2>
<p>Performed tests on 15 different images. Out of them 10 images were of humans and remaining 5 were of other objects. <a class="el" href="classDetector.html">Detector</a> output showed 80% accuracy with 2 false negatives and 1 false positive. <a href="https://github.com/HrushikeshBudhale/Monocular-Human-Position-Estimator/blob/main/results/test_results%20-%20Sheet1.csv">csv file</a></p>
<h2><a class="anchor" id="autotoc_md21"></a>
Video link</h2>
<ul>
<li><a href="https://youtu.be/fk__0-6L_vQ">Project Proposal Video</a></li>
<li><a href="https://youtu.be/0RSSTZF7N8k">Phase1 Demo</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
External Dependencies</h2>
<ul>
<li><a href="https://github.com/opencv/opencv">Opencv</a></li>
<li><a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen3</a> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
